{"/Users/kainos/Documents/Source/client-metalab/css-js-loader/test/index.spec.js":{"source":"import _webpack from 'webpack';\nimport {expect} from 'chai';\nimport path from 'path';\nimport MemoryFileSystem from 'memory-fs';\nimport fs from 'fs';\n\nconst cssJsLoader = path.resolve(__dirname, '../');\nconst config = {\n  entry: path.join(__dirname, 'fixture/input.css.js'),\n  output: {\n    path: path.join(__dirname, 'fixture/'),\n    filename: 'output.js',\n  },\n  resolveLoader: {\n    alias: {\n      'css-js-loader': cssJsLoader,\n    },\n  },\n  module: {\n    loaders: [{\n      test: /\\.css\\.js$/,\n      loader: 'css-js-loader',\n    }, {\n      test: /\\.js$/,\n      loader: 'babel-loader',\n    }],\n  },\n};\n\nconst compile = () => {\n  return new Promise((resolve) => {\n    _webpack(config, (err, stats) => {\n      // console.log(err); // eslint-disable-line no-console\n      expect(err).to.be.null;\n      resolve(stats);\n    });\n  });\n  // const compiler = _webpack(config);\n\n  // compiler.outputFileSystem = new MemoryFileSystem();\n  // return new Promise((resolve) => {\n  //   compiler.run((err, _stats) => {\n  //     expect(err).to.be.null;\n  //     const stats = _stats.toJson();\n  //     const files = {};\n  //     stats.assets.forEach((asset) => {\n  //       files[asset.name] = compiler.outputFileSystem.readFileSync(\n  //         path.join(config.output.path, asset.name)\n  //       );\n  //     });\n  //     console.log(stats); // eslint-disable-line no-console\n  //     resolve((stats, files));\n  //   });\n  // });\n};\n\ndescribe('css-js-loader test', function() {\n  it('should split files when needed', () =>\n    compile().then((stats) => {\n      console.log(stats.compilation); // eslint-disable-line no-console\n      if (stats.hasErrors()) {\n        console.log(stats.compilation.errors[0]); // eslint-disable-line no-console\n        // done(stats.compilation.errors[0]);\n        return;\n      }\n      // console.log('got here at least', stats.stats.compilation); // eslint-disable-line no-console\n    })\n  );\n  it('should check that this test file is run', function() {\n    expect(null).to.be.null;\n  });\n});\n","path":"/Users/kainos/Documents/Source/client-metalab/css-js-loader/test/index.spec.js","locations":[{"id":0,"loc":{"start":{"line":7,"column":20},"end":{"line":7,"column":50}},"tags":["statement","variable","line"],"count":1},{"id":1,"loc":{"start":{"line":8,"column":15},"end":{"line":28,"column":1}},"tags":["statement","variable","line"],"count":1},{"id":2,"loc":{"start":{"line":9,"column":9},"end":{"line":9,"column":53}},"tags":["line"],"count":1},{"id":3,"loc":{"start":{"line":10,"column":10},"end":{"line":13,"column":3}},"tags":["line"],"count":1},{"id":4,"loc":{"start":{"line":11,"column":10},"end":{"line":11,"column":42}},"tags":["line"],"count":1},{"id":5,"loc":{"start":{"line":12,"column":14},"end":{"line":12,"column":25}},"tags":["line"],"count":1},{"id":6,"loc":{"start":{"line":14,"column":17},"end":{"line":18,"column":3}},"tags":["line"],"count":1},{"id":7,"loc":{"start":{"line":15,"column":11},"end":{"line":17,"column":5}},"tags":["line"],"count":1},{"id":8,"loc":{"start":{"line":16,"column":23},"end":{"line":16,"column":34},"identifierName":"cssJsLoader"},"tags":["line"],"count":1},{"id":9,"loc":{"start":{"line":19,"column":10},"end":{"line":27,"column":3}},"tags":["line"],"count":1},{"id":10,"loc":{"start":{"line":20,"column":13},"end":{"line":26,"column":6}},"tags":["line"],"count":1},{"id":11,"loc":{"start":{"line":20,"column":14},"end":{"line":23,"column":5}},"tags":["line"],"count":1},{"id":12,"loc":{"start":{"line":23,"column":7},"end":{"line":26,"column":5}},"tags":["line"],"count":1},{"id":13,"loc":{"start":{"line":21,"column":12},"end":{"line":21,"column":24}},"tags":["line"],"count":1},{"id":14,"loc":{"start":{"line":22,"column":14},"end":{"line":22,"column":29}},"tags":["line"],"count":1},{"id":15,"loc":{"start":{"line":24,"column":12},"end":{"line":24,"column":19}},"tags":["line"],"count":1},{"id":16,"loc":{"start":{"line":25,"column":14},"end":{"line":25,"column":28}},"tags":["line"],"count":1},{"id":17,"loc":{"start":{"line":30,"column":16},"end":{"line":55,"column":1}},"tags":["statement","variable","line"],"count":1},{"id":18,"loc":{"start":{"line":30,"column":16},"end":{"line":55,"column":1}},"tags":["function"],"name":"@30:16","count":1},{"id":19,"loc":{"start":{"line":31,"column":9},"end":{"line":37,"column":4}},"tags":["line","statement"],"count":1},{"id":20,"loc":{"start":{"line":31,"column":21},"end":{"line":37,"column":3}},"tags":["function"],"name":"@31:21","count":1},{"id":21,"loc":{"start":{"line":32,"column":4},"end":{"line":36,"column":7}},"tags":["statement","line"],"count":1},{"id":22,"loc":{"start":{"line":32,"column":21},"end":{"line":36,"column":5}},"tags":["function"],"name":"@32:21","count":1},{"id":23,"loc":{"start":{"line":34,"column":6},"end":{"line":34,"column":29}},"tags":["statement","line"],"count":1},{"id":24,"loc":{"start":{"line":35,"column":6},"end":{"line":35,"column":21}},"tags":["statement","line"],"count":1},{"id":25,"loc":{"start":{"line":57,"column":0},"end":{"line":72,"column":3}},"tags":["statement","line"],"count":1},{"id":26,"loc":{"start":{"line":57,"column":31},"end":{"line":72,"column":1}},"tags":["function"],"name":"@57:31","count":1},{"id":27,"loc":{"start":{"line":58,"column":2},"end":{"line":68,"column":4}},"tags":["statement","line"],"count":1},{"id":28,"loc":{"start":{"line":58,"column":39},"end":{"line":67,"column":6}},"tags":["function"],"name":"@58:39","count":1},{"id":29,"loc":{"start":{"line":59,"column":19},"end":{"line":67,"column":5}},"tags":["function"],"name":"@59:19","count":1},{"id":30,"loc":{"start":{"line":60,"column":6},"end":{"line":60,"column":37}},"tags":["statement","line"],"count":1},{"id":31,"loc":{"start":{"line":61,"column":29},"end":{"line":65,"column":7}},"tags":["branch","line","if"],"group":"61:6","count":0},{"id":32,"loc":{"start":{"line":65,"column":7},"end":{"line":65,"column":7}},"tags":["branch","if"],"group":"61:6","count":1},{"id":33,"loc":{"start":{"line":62,"column":8},"end":{"line":62,"column":49}},"tags":["statement","line"],"count":0},{"id":34,"loc":{"start":{"line":64,"column":8},"end":{"line":64,"column":15}},"tags":["line","statement"],"count":0},{"id":35,"loc":{"start":{"line":69,"column":2},"end":{"line":71,"column":5}},"tags":["statement","line"],"count":1},{"id":36,"loc":{"start":{"line":69,"column":48},"end":{"line":71,"column":3}},"tags":["function"],"name":"@69:48","count":1},{"id":37,"loc":{"start":{"line":70,"column":4},"end":{"line":70,"column":28}},"tags":["statement","line"],"count":1}]},"/Users/kainos/Documents/Source/client-metalab/css-js-loader/index.js":{"source":"var defaults = require('lodash/defaults');\nvar mapKeys = require('lodash/mapKeys');\nvar isArray = require('lodash/isArray');\nvar omit = require('lodash/omit');\nvar isString = require('lodash/isString');\nvar isNumber = require('lodash/isNumber');\nvar loaderUtils = require('loader-utils');\nvar dangerousStyleValue = require('react-dom/lib/dangerousStyleValue');\nvar hyphenateStyleName = require('fbjs/lib/hyphenateStyleName');\n\nfunction indent(pretty, depth) {\n  return pretty ? Array(depth).join('  ') : '';\n};\n\nfunction space(pretty) {\n  return pretty ? ' ' : '';\n};\n\nfunction line(pretty) {\n  return pretty ? '\\n' : '';\n}\n\nfunction isProp(value) {\n  return isArray(value) ?\n    isProp(value[0], true) :\n    isString(value) || isNumber(value);\n}\n\nfunction format(config, value, name, level, inProp) {\n  level = level !== undefined ? level : 0;\n\n  var pretty = config.pretty;\n  var css = '';\n  var indentLevel = level;\n\n  if (isArray(value)) {\n    for (var i = 0, len = value.length; i < len; i ++) {\n      css += format(config, value[i], name, level, inProp);\n    }\n    return css;\n  }\n\n  if (inProp) {\n    // The `name` and `value` args currently represent a css property and value.\n    // Use React's css style processing funcs to generate css markup.\n\n    css += indent(pretty, indentLevel) + hyphenateStyleName(name) + ':' + space(pretty);\n    css += dangerousStyleValue(name, value) + ';' + line(pretty);\n  } else {\n    // The `name` and `value` args currently represent a block containing css\n    // properties or further nested blocks. Iterate through and parse\n    // the nested values.\n\n    if (name) {\n      // Unless we are in the global css scope (`name` is undefined), add a new\n      // block to the markup.\n      css += indent(pretty, indentLevel) + name + space(pretty) + '{' + line(pretty);\n      indentLevel += 1;\n    }\n\n    for (var key in value) {\n      if (!value.hasOwnProperty(key)) {\n        continue;\n      }\n\n      // Extract the style definition or nested block.\n      var innerValue = value[key];\n\n      if (innerValue === null) {\n        continue;\n      }\n\n      // Determine if the inner value is a block or a property.\n      var innerIsProp = isProp(innerValue);\n\n      // Remove whitespace from selector/block/property.\n      var innerName = key.trim();\n\n      css += format(config, innerValue, innerName, level + 1, innerIsProp);\n    }\n\n    if (name) {\n      // Close the open block.\n      css += indent(pretty, level) + '}' + line(pretty) + line(pretty);\n    }\n  }\n\n  return css;\n}\n\nmodule.exports = function(content) {\n  this.cacheable();\n\n  var config = defaults(\n    loaderUtils.getLoaderConfig(this, 'jsCssLoader'),\n    {pretty: process.env.NODE_ENV !== 'production'}\n  );\n\n  var styles = this.exec(content, this.resourcePath);\n\n  var css = '';\n\n  if (styles.__esModule) {\n    // When using Babel, css classes can be defined as named es6 exports.\n    //\n    // e.x.\n    //\n    // ```\n    // export default {\n    //   '.base': {\n    //     color: 'black'\n    //   }\n    // };\n    // ```\n    //\n    // is the same as\n    //\n    // ```\n    // export const base = {\n    //   color: 'black'\n    // };\n    // ```\n    return format(config, [\n      mapKeys(\n        omit(styles, 'default'),\n        function (value, key) {\n          return '.' + key;\n        }\n      ),\n      styles.default,\n    ]);\n  }\n\n  return format(config, styles);\n};\n","path":"/Users/kainos/Documents/Source/client-metalab/css-js-loader/index.js","locations":[{"id":0,"loc":{"start":{"line":1,"column":15},"end":{"line":1,"column":41}},"tags":["statement","variable","line"],"count":1},{"id":1,"loc":{"start":{"line":2,"column":14},"end":{"line":2,"column":39}},"tags":["statement","variable","line"],"count":1},{"id":2,"loc":{"start":{"line":3,"column":14},"end":{"line":3,"column":39}},"tags":["statement","variable","line"],"count":1},{"id":3,"loc":{"start":{"line":4,"column":11},"end":{"line":4,"column":33}},"tags":["statement","variable","line"],"count":1},{"id":4,"loc":{"start":{"line":5,"column":15},"end":{"line":5,"column":41}},"tags":["statement","variable","line"],"count":1},{"id":5,"loc":{"start":{"line":6,"column":15},"end":{"line":6,"column":41}},"tags":["statement","variable","line"],"count":1},{"id":6,"loc":{"start":{"line":7,"column":18},"end":{"line":7,"column":41}},"tags":["statement","variable","line"],"count":1},{"id":7,"loc":{"start":{"line":8,"column":26},"end":{"line":8,"column":70}},"tags":["statement","variable","line"],"count":1},{"id":8,"loc":{"start":{"line":9,"column":25},"end":{"line":9,"column":63}},"tags":["statement","variable","line"],"count":1},{"id":9,"loc":{"start":{"line":11,"column":0},"end":{"line":13,"column":1}},"tags":["function"],"name":"indent","count":0},{"id":10,"loc":{"start":{"line":12,"column":9},"end":{"line":12,"column":46}},"tags":["line","statement"],"count":0},{"id":11,"loc":{"start":{"line":12,"column":18},"end":{"line":12,"column":41}},"tags":["branch","line","if"],"group":"12:9","count":0},{"id":12,"loc":{"start":{"line":12,"column":44},"end":{"line":12,"column":46}},"tags":["branch","line","if"],"group":"12:9","count":0},{"id":13,"loc":{"start":{"line":15,"column":0},"end":{"line":17,"column":1}},"tags":["function"],"name":"space","count":0},{"id":14,"loc":{"start":{"line":16,"column":9},"end":{"line":16,"column":26}},"tags":["line","statement"],"count":0},{"id":15,"loc":{"start":{"line":16,"column":18},"end":{"line":16,"column":21}},"tags":["branch","line","if"],"group":"16:9","count":0},{"id":16,"loc":{"start":{"line":16,"column":24},"end":{"line":16,"column":26}},"tags":["branch","line","if"],"group":"16:9","count":0},{"id":17,"loc":{"start":{"line":19,"column":0},"end":{"line":21,"column":1}},"tags":["function"],"name":"line","count":0},{"id":18,"loc":{"start":{"line":20,"column":9},"end":{"line":20,"column":27}},"tags":["line","statement"],"count":0},{"id":19,"loc":{"start":{"line":20,"column":18},"end":{"line":20,"column":22}},"tags":["branch","line","if"],"group":"20:9","count":0},{"id":20,"loc":{"start":{"line":20,"column":25},"end":{"line":20,"column":27}},"tags":["branch","line","if"],"group":"20:9","count":0},{"id":21,"loc":{"start":{"line":23,"column":0},"end":{"line":27,"column":1}},"tags":["function"],"name":"isProp","count":0},{"id":22,"loc":{"start":{"line":24,"column":9},"end":{"line":26,"column":38}},"tags":["line","statement"],"count":0},{"id":23,"loc":{"start":{"line":25,"column":4},"end":{"line":25,"column":26}},"tags":["branch","line","if"],"group":"24:9","count":0},{"id":24,"loc":{"start":{"line":26,"column":4},"end":{"line":26,"column":38}},"tags":["branch","line","if"],"group":"24:9","count":0},{"id":25,"loc":{"start":{"line":26,"column":4},"end":{"line":26,"column":19}},"tags":["branch","logic"],"group":"26:4","count":0},{"id":26,"loc":{"start":{"line":26,"column":23},"end":{"line":26,"column":38}},"tags":["branch","logic"],"group":"26:4","count":0},{"id":27,"loc":{"start":{"line":29,"column":0},"end":{"line":89,"column":1}},"tags":["function"],"name":"format","count":1},{"id":28,"loc":{"start":{"line":30,"column":2},"end":{"line":30,"column":42}},"tags":["statement","line"],"count":1},{"id":29,"loc":{"start":{"line":30,"column":32},"end":{"line":30,"column":37},"identifierName":"level"},"tags":["branch","line","if"],"group":"30:10","count":0},{"id":30,"loc":{"start":{"line":30,"column":40},"end":{"line":30,"column":41}},"tags":["branch","line","if"],"group":"30:10","count":1},{"id":31,"loc":{"start":{"line":32,"column":15},"end":{"line":32,"column":28}},"tags":["statement","variable","line"],"count":1},{"id":32,"loc":{"start":{"line":33,"column":12},"end":{"line":33,"column":14}},"tags":["statement","variable","line"],"count":1},{"id":33,"loc":{"start":{"line":34,"column":20},"end":{"line":34,"column":25},"identifierName":"level"},"tags":["statement","variable","line"],"count":1},{"id":34,"loc":{"start":{"line":36,"column":22},"end":{"line":41,"column":3}},"tags":["branch","line","if"],"group":"36:2","count":0},{"id":35,"loc":{"start":{"line":41,"column":3},"end":{"line":41,"column":3}},"tags":["branch","if"],"group":"36:2","count":1},{"id":36,"loc":{"start":{"line":37,"column":17},"end":{"line":37,"column":18}},"tags":["statement","variable","line"],"count":0},{"id":37,"loc":{"start":{"line":37,"column":26},"end":{"line":37,"column":38}},"tags":["statement","variable","line"],"count":0},{"id":38,"loc":{"start":{"line":38,"column":6},"end":{"line":38,"column":59}},"tags":["statement","line"],"count":0},{"id":39,"loc":{"start":{"line":40,"column":11},"end":{"line":40,"column":14},"identifierName":"css"},"tags":["line","statement"],"count":0},{"id":40,"loc":{"start":{"line":43,"column":14},"end":{"line":49,"column":3}},"tags":["branch","line","if"],"group":"43:2","count":0},{"id":41,"loc":{"start":{"line":49,"column":9},"end":{"line":86,"column":3}},"tags":["branch","line","if"],"group":"43:2","count":1},{"id":42,"loc":{"start":{"line":47,"column":4},"end":{"line":47,"column":88}},"tags":["statement","line"],"count":0},{"id":43,"loc":{"start":{"line":48,"column":4},"end":{"line":48,"column":65}},"tags":["statement","line"],"count":0},{"id":44,"loc":{"start":{"line":54,"column":14},"end":{"line":59,"column":5}},"tags":["branch","line","if"],"group":"43:2","count":0},{"id":45,"loc":{"start":{"line":59,"column":5},"end":{"line":59,"column":5}},"tags":["branch","if"],"group":"43:2","count":1},{"id":46,"loc":{"start":{"line":57,"column":6},"end":{"line":57,"column":85}},"tags":["statement","line"],"count":0},{"id":47,"loc":{"start":{"line":58,"column":6},"end":{"line":58,"column":23}},"tags":["statement","line"],"count":0},{"id":48,"loc":{"start":{"line":62,"column":38},"end":{"line":64,"column":7}},"tags":["branch","line","if"],"group":"43:2","count":0},{"id":49,"loc":{"start":{"line":64,"column":7},"end":{"line":64,"column":7}},"tags":["branch","if"],"group":"43:2","count":0},{"id":50,"loc":{"start":{"line":63,"column":8},"end":{"line":63,"column":17}},"tags":["statement","line"],"count":0},{"id":51,"loc":{"start":{"line":67,"column":23},"end":{"line":67,"column":33}},"tags":["statement","variable","line"],"count":0},{"id":52,"loc":{"start":{"line":69,"column":31},"end":{"line":71,"column":7}},"tags":["branch","line","if"],"group":"43:2","count":0},{"id":53,"loc":{"start":{"line":71,"column":7},"end":{"line":71,"column":7}},"tags":["branch","if"],"group":"43:2","count":0},{"id":54,"loc":{"start":{"line":70,"column":8},"end":{"line":70,"column":17}},"tags":["statement","line"],"count":0},{"id":55,"loc":{"start":{"line":74,"column":24},"end":{"line":74,"column":42}},"tags":["statement","variable","line"],"count":0},{"id":56,"loc":{"start":{"line":77,"column":22},"end":{"line":77,"column":32}},"tags":["statement","variable","line"],"count":0},{"id":57,"loc":{"start":{"line":79,"column":6},"end":{"line":79,"column":75}},"tags":["statement","line"],"count":0},{"id":58,"loc":{"start":{"line":82,"column":14},"end":{"line":85,"column":5}},"tags":["branch","line","if"],"group":"43:2","count":0},{"id":59,"loc":{"start":{"line":85,"column":5},"end":{"line":85,"column":5}},"tags":["branch","if"],"group":"43:2","count":1},{"id":60,"loc":{"start":{"line":84,"column":6},"end":{"line":84,"column":71}},"tags":["statement","line"],"count":0},{"id":61,"loc":{"start":{"line":88,"column":9},"end":{"line":88,"column":12},"identifierName":"css"},"tags":["line","statement"],"count":1},{"id":62,"loc":{"start":{"line":91,"column":0},"end":{"line":135,"column":2}},"tags":["statement","line"],"count":1},{"id":63,"loc":{"start":{"line":91,"column":17},"end":{"line":135,"column":1}},"tags":["function"],"name":"@91:17","count":1},{"id":64,"loc":{"start":{"line":92,"column":2},"end":{"line":92,"column":19}},"tags":["statement","line"],"count":1},{"id":65,"loc":{"start":{"line":94,"column":15},"end":{"line":97,"column":3}},"tags":["statement","variable","line"],"count":1},{"id":66,"loc":{"start":{"line":96,"column":13},"end":{"line":96,"column":50}},"tags":["line"],"count":1},{"id":67,"loc":{"start":{"line":99,"column":15},"end":{"line":99,"column":52}},"tags":["statement","variable","line"],"count":1},{"id":68,"loc":{"start":{"line":101,"column":12},"end":{"line":101,"column":14}},"tags":["statement","variable","line"],"count":1},{"id":69,"loc":{"start":{"line":103,"column":25},"end":{"line":132,"column":3}},"tags":["branch","line","if"],"group":"103:2","count":0},{"id":70,"loc":{"start":{"line":132,"column":3},"end":{"line":132,"column":3}},"tags":["branch","if"],"group":"103:2","count":1},{"id":71,"loc":{"start":{"line":123,"column":11},"end":{"line":131,"column":6}},"tags":["line","statement"],"count":0},{"id":72,"loc":{"start":{"line":124,"column":6},"end":{"line":129,"column":7}},"tags":["line"],"count":0},{"id":73,"loc":{"start":{"line":130,"column":6},"end":{"line":130,"column":20}},"tags":["line"],"count":0},{"id":74,"loc":{"start":{"line":126,"column":8},"end":{"line":128,"column":9}},"tags":["function"],"name":"@126:8","count":0},{"id":75,"loc":{"start":{"line":127,"column":17},"end":{"line":127,"column":26}},"tags":["line","statement"],"count":0},{"id":76,"loc":{"start":{"line":134,"column":9},"end":{"line":134,"column":31}},"tags":["line","statement"],"count":1}]}}